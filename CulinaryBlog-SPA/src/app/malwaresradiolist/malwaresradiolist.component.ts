import { AuthService } from './../_services/auth.service';
import { Component, OnInit, ViewChild, Output, EventEmitter } from '@angular/core';
import { MalwareService } from '../_services/malware.service';
import { SelectionModel } from '@angular/cdk/collections';
import { MatListOption } from '@angular/material';

@Component({
  selector: 'app-malwaresradiolist',
  templateUrl: './malwaresradiolist.component.html',
  styleUrls: ['./malwaresradiolist.component.css']
})
export class MalwaresradiolistComponent implements OnInit {

  allMalwares:any;
  malware:any;
  @Output() malwareEmiter= new EventEmitter();
  
  user: string;
  @ViewChild('malwaresList') malwaresList;
  constructor(private malwareService : MalwareService,private authService:AuthService) { }

  ngOnInit() {
    this.user=this.authService.decodedToken.unique_name;
    this.malwareService.getAll().subscribe(res => this.allMalwares = res);

    this.malwaresList.selectedOptions = new SelectionModel<MatListOption>(false);
  }

  isAuthor(orginalAuthor: string): boolean{
    if(orginalAuthor==this.user) return true;
    else return false;
  }

  setMalware(malware: any) {
    this.malware = malware;
    this.malwareEmiter.emit(this.malware);
  }
 
}
